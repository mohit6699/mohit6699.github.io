<script>
    var product_arr_account_overview_adbe = '${profile.account_overview_EtCASA_wo_CC_2}' || "CC,PL,BT,WS,NEW"; //Order of the products "CASA,PL,BT"
    var expReferIDValue = 'EtCASA_wo_CC_2'; //Experience specific refer ID
</script>
<style>
    #adobe-account-overview-div-1 #adobe-account-overview-child-1 {
        color: #fff;
        background: none;
        margin-bottom: 20px;
        text-align: center;
    }
</style>
<script>
    try {
        var account_summary_offer_adbe = {
            "CC": {
                "imageBanner": "https://av.sc.com/sg/content/images/728x90_CC_Desktop-Banner-Asset-Aug_1.gif",
                "CTAlink": 'https://www.sc.com/sg/credit-cards/smart-credit-card/?subchancode=IBF2&referID=' + expReferIDValue
            },
            "CASA": {
                "imageBanner": "https://av.sc.com/sg/content/images/728x90_CASA-Banner-IceCreamKV-1.gif",
                "CTAlink": 'https://www.sc.com/sg/save/current-accounts/bonussaver/?subchancode=IBF2&referID=' + expReferIDValue
            },
            "PL": {
                "imageBanner": "https://av.sc.com/sg/content/images/728x90_C1_Banner-Asset-SafeboxKV-Oct-1.gif",
                "CTAlink": 'https://www.sc.com/sg/borrow/loans/cashone/?subchancode=IBF2&referID=' + expReferIDValue
            },
            "BT": {
                "imageBanner": "https://av.sc.com/sg/content/images/728x90_CCFT-1.gif",
                "CTAlink": 'https://www.sc.com/sg/borrow/loans/balance-transfer/?subchancode=IBF2&referID=' + expReferIDValue
            },
            "WS": {
                "imageBanner": "", // to be updated later
                "CTAlink": 'https://www.sc.com/sg/save/current-accounts/wealth-saver/?subchancode=IBF2&referID=' + expReferIDValue
            },
            "NEW": {
                "imageBanner": "", // to be updated later
                "CTAlink": '' + expReferIDValue
            }
        };

        if (typeof (product_arr_account_overview_adbe) == 'string') {
            product_arr_account_overview_adbe = product_arr_account_overview_adbe.split(",");
        }

        //Storing the profile information stored based on the AAM segment in a variable
        var BT_users_adbe = '${profile.BT_users}' || 'false';
        var CC_users_adbe = '${profile.CC_users}' || 'false';
        var PL_users_adbe = '${profile.PL_users}' || 'false';
        var CASA_users_adbe = '${profile.CASA_users}' || 'false';
        var WS_users_adbe = '${profile.WS_users}' || 'false';
        var NEW_users_adbe = '${profile.NEW_users}' || 'false';

        //Based on the profile, removing the product from the rotation logic
        if (CC_users_adbe == 'true') {
            var product_arr_account_overview_adbe_temp = []
            var index_adbe = 0;
            product_arr_account_overview_adbe.forEach(function (item) {
                if (!(item == 'CC')) {
                    product_arr_account_overview_adbe_temp[index_adbe] = item;
                    index_adbe++;
                }
            });
            product_arr_account_overview_adbe = product_arr_account_overview_adbe_temp;
        }

        if (PL_users_adbe == 'true') {
            var product_arr_account_overview_adbe_temp = []
            var index_adbe = 0;
            product_arr_account_overview_adbe.forEach(function (item) {
                if (!(item == 'PL')) {
                    product_arr_account_overview_adbe_temp[index_adbe] = item;
                    index_adbe++;
                }
            });
            product_arr_account_overview_adbe = product_arr_account_overview_adbe_temp;
        }

        if (BT_users_adbe == 'true') {
            var product_arr_account_overview_adbe_temp = []
            var index_adbe = 0;
            product_arr_account_overview_adbe.forEach(function (item) {
                if (!(item == 'BT')) {
                    product_arr_account_overview_adbe_temp[index_adbe] = item;
                    index_adbe++;
                }
            });
            product_arr_account_overview_adbe = product_arr_account_overview_adbe_temp;
        }

        if (CASA_users_adbe == 'true') {
            var product_arr_account_overview_adbe_temp = []
            var index_adbe = 0;
            product_arr_account_overview_adbe.forEach(function (item) {
                if (!(item == 'CASA')) {
                    product_arr_account_overview_adbe_temp[index_adbe] = item;
                    index_adbe++;
                }
            });
            product_arr_account_overview_adbe = product_arr_account_overview_adbe_temp;
        }

        if (CASA_users_adbe == 'true') {
            var product_arr_account_overview_adbe_temp = []
            var index_adbe = 0;
            product_arr_account_overview_adbe.forEach(function (item) {
                if (!(item == 'WS')) {
                    product_arr_account_overview_adbe_temp[index_adbe] = item;
                    index_adbe++;
                }
            });
            product_arr_account_overview_adbe = product_arr_account_overview_adbe_temp;
        }

        if (CASA_users_adbe == 'true') {
            var product_arr_account_overview_adbe_temp = []
            var index_adbe = 0;
            product_arr_account_overview_adbe.forEach(function (item) {
                if (!(item == 'NEW')) {
                    product_arr_account_overview_adbe_temp[index_adbe] = item;
                    index_adbe++;
                }
            });
            product_arr_account_overview_adbe = product_arr_account_overview_adbe_temp;
        }

        if (typeof (product_arr_account_overview_adbe) == 'string') {
            product_arr_account_overview_adbe = product_arr_account_overview_adbe.split(",");
        }

        //Checking the offer view count and rotating the offer array if the visit is odd number
        var accountOverviewIBofferViewCountProfile = '${profile.accountOverviewIBofferViewCount}' || 1;
        if (accountOverviewIBofferViewCountProfile % 2 == 1 && accountOverviewIBofferViewCountProfile != 1) {
            product_arr_account_overview_adbe.splice(product_arr_account_overview_adbe.length, 0, product_arr_account_overview_adbe[0]);
            product_arr_account_overview_adbe.splice(0, 1);
        }

        adobe.target.trackEvent({
            "mbox": "mboxClickTrack",
            "params": {
                "profile.account_overview_EtCASA_wo_CC_2": product_arr_account_overview_adbe.toString()
            }
        });

        if (typeof (product_arr_account_overview_adbe) == 'string') {
            product_arr_account_overview_adbe = product_arr_account_overview_adbe.split(",");
        }

        //Increase the offer view count and storing in the profile
        accountOverviewIBofferViewCountProfile++;
        adobe.target.trackEvent({
            "mbox": "mboxClickTrack",
            "params": {
                "profile.accountOverviewIBofferViewCount": accountOverviewIBofferViewCountProfile
            }
        });

        (function () {
            var cnt = 7000;
            function init() {
                if (document.querySelector('#adobe-account-overview-div-1') != null) {
                    // console.log("qualified");
                    document.querySelector('#adobe-account-overview-div-1').innerHTML = '<div id="adobe-account-overview-child-1" name="adobe-account-overview-child-1"> <a href="' + account_summary_offer_adbe[product_arr_account_overview_adbe[0]].CTAlink + '" title="' + product_arr_account_overview_adbe[0] + '-offer" target="_blank"> <img class="banner-cls-adbe" src="' + account_summary_offer_adbe[product_arr_account_overview_adbe[0]].imageBanner + '"></a> </div>';

                    document.querySelector("#adobe-account-overview-div-1 .banner-cls-adbe").addEventListener("mousedown", function () {
                        adobe.target.trackEvent({
                            "mbox": "mboxClickTrack",
                            "params": {
                                "clicked": "bannerCTAclicks"
                            }
                        });
                    });
                } else if (cnt > 0) {
                    cnt = cnt - 500;
                    setTimeout(init, 500);
                } else {
                }
            }
            init();
        })();
    } catch (err) {
        console.log(err);
    }
</script>