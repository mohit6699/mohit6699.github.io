<script>
    var UC07productOrder_adbe = ["Default"]; //Order of the products
    var expReferIDValue = 'all_visitors'; //Experience specific refer ID
    var skipTimerValue = 2000; // 2 sec

    var interstitialOffer_content_adbe = {
        "CC": {
            "imageBanner": "https://av.sc.com/sg/content/images/Pre-login-Banner_828x1700-July-2022.jpg",
            "offerTitle": "", //Add the offer title only if the banner image doesn't have any content
            "offerTitleFontColor": "", //font-color of offer title
            "primaryCTAtitle": "Learn more",
            "primaryCTAType": "website", //deeplink or website
            "primaryCTAlink": 'https://www.sc.com/sg/credit-cards/smart-credit-card/?subchancode=IBIB&referID=' + expReferIDValue,
            "skipValue": '${profile.CCSkip}', //Target Profile value - auto populated and no changes required
            "isProductUser": ('${profile.CC_users}' || 0) //'${profile.CC_users}' - Target Profile value from AT activity or set false if no exclusion
        },
        "PL": {
            "imageBanner": "https://av.sc.com/sg/content/images/SCMobile_Interstitial_SafBox_828x1800-NTC-1.jpg",
            "offerTitle": "", //Add the offer title only if the banner image doesn't have any content
            "offerTitleFontColor": "", //font-color of offer title
            "primaryCTAtitle": "Learn more",
            "primaryCTAType": "website", //deeplink or website
            "primaryCTAlink": 'https://www.sc.com/sg/borrow/loans/cashone/?subchancode=IBIB&referID=' + expReferIDValue,
            "skipValue": ('${profile.PLSkip}' || 0), //Target Profile value - auto populated and no changes required
            "isProductUser": false //'${profile.PL_users}' - Target Profile value from AT activity or set false if no exclusion
        },
        "BT": {
            "imageBanner": "https://av.sc.com/sg/content/images/CCFT_Interstitial_Banner_828x1800_Aug2022_v2.jpg",
            "offerTitle": "", //Add the offer title only if the banner image doesn't have any content
            "offerTitleFontColor": "", //font-color of offer title
            "primaryCTAtitle": "Learn more",
            "primaryCTAType": "website", //deeplink or website
            "primaryCTAlink": 'https://www.sc.com/sg/borrow/loans/balance-transfer/?subchancode=IBIB&referID=' + expReferIDValue,
            "skipValue": ('${profile.BTSkip}' || 0), //Target Profile value - auto populated and no changes required
            "isProductUser": false //'${profile.BT_users}' - Target Profile value from AT activity or set false if no exclusion
        },
        "CASA": {
            "imageBanner": "https://av.sc.com/sg/content/images/Pre-LoginBanner-828x1700_Oct2022.jpg",
            "offerTitle": "", //Add the offer title only if the banner image doesn't have any content
            "offerTitleFontColor": "white", //font-color of offer title
            "primaryCTAtitle": "Learn more",
            "primaryCTAType": "website", //deeplink or website
            "primaryCTAlink": 'https://www.sc.com/sg/save/current-accounts/bonussaver/?subchancode=IBIB&referID=' + expReferIDValue,
            "skipValue": ('${profile.CASASkip}' || 0), //Target Profile value - auto populated and no changes required
            "isProductUser": false //'${profile.CASA_users}' - Target Profile value from AT activity or set false if no exclusion
        },
        "P6": {
            "imageBanner": "https://av.sc.com/sg/content/images/Bank-Scam-Quiz-prelogin-screen.jpg",
            "offerTitle": "", //Add the offer title only if the banner image doesn't have any content
            "offerTitleFontColor": "", //font-color of offer title
            "primaryCTAtitle": "Learn more",
            "primaryCTAType": "website", //deeplink or website
            "primaryCTAlink": 'https://www.scamalert.sg/scambusterbankquiz/?utm_source=SCB&utm_medium=prelogin&utm_campaign=thescambusterbankquiz&utm_id=NCPC&utm_term=thescambusterbankquiz&utm_content=scambuster',
            "skipValue": ('${profile.P6Skip}' || 0), //Target Profile value - auto populated and no changes required
            "isProductUser": false //Target Profile value from AT activity or set false if no exclusion
        },
        "Default": {
            "imageBanner": "https://av.sc.com/sg/content/images/Pre-LoginBanner-828x1700-red_.jpg", //For Default, the banner alone is modified
            "offerTitle": "", //Add the offer title only if the banner image doesn't have any content
            "offerTitleFontColor": "", //font-color of offer title
            "primaryCTAtitle": "CHECK AVAILABILITY",
            "primaryCTAType": "deeplink", //deeplink or website
            "primaryCTAlink": 'https://m.sc.com/sg/scmob?route=login.reservation',
            "skipValue": ('${profile.DefaultSkip}' || 0), //Target Profile value - auto populated and no changes required
            "isProductUser": false //Target Profile value from AT activity or set false if no exclusion
        }
    };
</script>
<style>
    #Adobe_Security_Warning_Button_ADBE {
        display: block;
        width: 100%;
        text-align: center;
    }

    div#Adobe_Security_Warning_Button_ADBE a.adbeBanner_Cls {
        display: block;
        color: white;
        margin: 12px;
    }

    div#Adobe_Security_Warning a {
        -webkit-text-size-adjust: 100%;
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
        user-select: none;
        font: inherit;
        overflow: visible;
        margin: 0;
        font-family: "SC Sans Web", sans-serif;
        font-weight: 400;
        font-size: 14px;
        -webkit-font-smoothing: antialiased;
        display: inline-block;
        width: 100%;
        min-width: 100px;
        min-height: 44px;
        line-height: 44px;
        padding: 0 20px;
        border-radius: 0;
        border: 2px solid #00a546 !important;
        text-align: center;
        text-shadow: none;
        box-shadow: none;
        outline: 0;
        -webkit-appearance: none;
        color: #00a546;
        background: #fff;
        border: none;
        cursor: pointer;
        text-transform: uppercase;
        -webkit-box-flex: 1;
        flex: 1 1 auto;
    }

    div#Adobe_Security_Warning a.applyNowCTA-adbe {
        width: 60%;
        /* Width property for check availability button(footer left button) */
        border: 2px solid #00a546 !important;
        color: #00a546;
        background: #fff;
    }

    div#Adobe_Security_Warning a.proceedCTA-adbe {
        width: 40%;
        /* Width property for skip button(footer right button) */
        border: 2px solid #00a546 !important;
        color: #fff;
        background: #00a546;
    }

    #Adobe_Security_Warning .scroll-content {
        position: relative;
        height: 100%;
        min-height: 100%;
        overflow-y: hidden;
        background-color: #fff;
    }

    #Adobe_Security_Warning .rdc-view___footer {
        position: fixed;
        left: 0;
        bottom: 0;
        width: 100%;
    }

    #Adobe_Security_Warning .offer-title-adbe {
        position: absolute;
        color: white;
        padding: 40px 20px;
        text-align: center;
        font-size: 16px;
    }

    #Adobe_Security_Warning {
        background: #fff;
    }

    .is-ios #Adobe_Security_Warning .rdc-view___footer {
        margin-bottom: 10px;
    }

    #Adobe_Security_Warning .view-security-warning.adbe-cls {
        display: block !important;
    }
</style>
<script>
    try {
        function closeInterstitialPopup() {
            try {
                var cntt = 7000;
                function initt() {
                    if (typeof (jQuery) != 'undefined' && jQuery('.rdc-modal-popup').length > 0) {
                        jQuery(".rdc-modal-popup").css("display", "none");
                        jQuery(".rdc-modal-popup").remove();
                        setTimeout(function () {
                            jQuery(".rdc-modal-popup").css("display", "none");
                            jQuery(".rdc-modal-popup").remove();
                        }, 50);
                    } else if (cntt > 0) {
                        cntt = cntt - 50;
                        setTimeout(initt, 50);
                    } else {
                    }
                }
                initt();
            } catch (err) {
                console.log(err);
            }
        }

        function okCTAClick() {
            try {
                var cntt = 7000;
                function initt() {
                    if (typeof (jQuery) != 'undefined' && jQuery('#Adobe_Security_Warning_Button').length > 0) {
                        console.log("line: 193 if");
                        document.querySelector("#Adobe_Security_Warning_Button").click();
                        closeInterstitialPopup();
                    } else if (cntt > 0) {
                        console.log("line: 197 if else");
                        cntt = cntt - 50;
                        setTimeout(initt, 50);
                        closeInterstitialPopup();
                    } else {
                        console.log("line: 202 else");
                        closeInterstitialPopup();
                    }
                }
                initt();
            } catch (e) {
                closeInterstitialPopup();
            }
        }

        var product_arr_interstitial_adbe_init = '${profile.v3interstitialOffer_adbe}' || UC07productOrder_adbe;

        if (typeof (product_arr_interstitial_adbe_init) == 'string') {
            product_arr_interstitial_adbe_init = product_arr_interstitial_adbe_init.split(",");
        }

        //Filter products that aren't in the order defined & Add products from order that aren't in the profile
        product_arr_interstitial_adbe_init = product_arr_interstitial_adbe_init.concat(UC07productOrder_adbe);
        product_arr_interstitial_adbe = [];
        product_arr_interstitial_adbe_init.forEach(function (item) {
            // console.log("item --", item, "product_arr_interstitial_adbe --", product_arr_interstitial_adbe, "--", ((product_arr_interstitial_adbe.indexOf(item) < 0) && (UC07productOrder_adbe.indexOf(item) >= 0)));
            if ((product_arr_interstitial_adbe.indexOf(item) < 0) && (UC07productOrder_adbe.indexOf(item) >= 0)) {
                product_arr_interstitial_adbe.push(item);
            }
        });

        //Based on the profile values - removing the product from the rotation logic
        var exclude_products_interstitial_adbe = [];

        var allProducts_interstitial_adbe = ["CC", "CASA", "PL", "BT", "P6", "Default"];

        allProducts_interstitial_adbe.forEach(function (item) {
            if (((new Date(interstitialOffer_content_adbe[item].skipValue)) != 'Invalid Date') && (interstitialOffer_content_adbe[item].isProductUser != 'true')) {
                if ((new Date(interstitialOffer_content_adbe[item].skipValue).valueOf()) <= (new Date().valueOf())) {
                    if ((UC07productOrder_adbe.indexOf(item) > -1) && (product_arr_interstitial_adbe.indexOf(item) <= -1)) {
                        product_arr_interstitial_adbe.push(item);
                    }
                } else {
                    exclude_products_interstitial_adbe.push(item);
                }
            } else if (interstitialOffer_content_adbe[item].isProductUser == 'true') {
                exclude_products_interstitial_adbe.push(item);
            }
        });

        product_arr_interstitial_adbe = product_arr_interstitial_adbe.filter(function (product) {
            return (exclude_products_interstitial_adbe.indexOf(product) < 0);
        });

        if (typeof (product_arr_interstitial_adbe) == 'string') {
            product_arr_interstitial_adbe = product_arr_interstitial_adbe.split(",");
        }

        //Checking the offer view count and rotating the offer array if the visit is odd number
        var interstitialMBofferViewCountProfile = '${profile.interstitialMBofferViewCount}' || 1;
        if (interstitialMBofferViewCountProfile % 2 == 1 && interstitialMBofferViewCountProfile != 1) {
            product_arr_interstitial_adbe.splice(product_arr_interstitial_adbe.length, 0, product_arr_interstitial_adbe[0]);
            product_arr_interstitial_adbe.splice(0, 1);
        }

        //Increase the offer view count and storing in the profile along with offer array
        interstitialMBofferViewCountProfile++;
        adobe.target.trackEvent({
            "mbox": "mboxClickTrack",
            "params": {
                "profile.v3interstitialOffer_adbe": product_arr_interstitial_adbe.toString(),
                "profile.interstitialMBofferViewCount": interstitialMBofferViewCountProfile
            }
        });

        //If no products then default product to be displayed
        if (product_arr_interstitial_adbe.length == 0) {
            if (((new Date(interstitialOffer_content_adbe["Default"].skipValue)) != 'Invalid Date') && (interstitialOffer_content_adbe["Default"].isProductUser != 'true')) {
                if ((new Date(interstitialOffer_content_adbe["Default"].skipValue).valueOf()) <= (new Date().valueOf())) {
                    product_arr_interstitial_adbe.push("Default");
                    adobe.target.trackEvent({
                        "mbox": "mboxClickTrack",
                        "params": {
                            "profile.v3interstitialOffer_adbe": "Default"
                        }
                    });
                }
            }
        }

        var skipProfileValue = ''; //Value of the skip number of the product

        Flickerlessly = window.Flickerlessly || {};
        !function (A) {
            "use strict";
            var init = function (id, sel, callback, persist) {
                var animationName = 'atNodeInserted' + id;
                var cssStr = '@keyframes ' + animationName + ' {from {opacity:0.99} to {opacity:1} }\n';
                cssStr += sel + '{animation-duration:0.001s;animation-name:' + animationName + ';visibility:hidden}';
                var head = document.getElementsByTagName("head")[0];
                if (head) {
                    var style = document.createElement("style");
                    style.setAttribute("type", "text/css");
                    if (style.styleSheet)
                        style.styleSheet.cssText = cssStr;
                    else
                        style.appendChild(document.createTextNode(cssStr));
                    head.insertBefore(style, head.firstChild)
                };
                var _insertListener = function (event) {
                    if (event.animationName === animationName && typeof event.target === 'object') {
                        var isExecute = ((persist === true) || (persist === false && event.target.getAttribute('data-flk-success') === null)) ? true : false;
                        if (console && console.info) console.info("Node " + sel + " ready! Execute: " + isExecute, event.target);
                        if (typeof callback === 'function' && isExecute) {
                            callback(event.target);
                            event.target.setAttribute('data-flk-success', animationName);
                        }
                        event.target.style.visibility = 'visible';
                    }
                };
                ['animationstart', 'MSAnimationStart', 'webkitAnimationStart'].forEach(function (item, index) {
                    document.addEventListener(item, _insertListener, false);
                });
            };
            A.onReady = function () {
                for (var i = 0; i < arguments.length; i++) {
                    var obj = arguments[i];
                    var selector = obj.selector;
                    var success = obj.success || null;
                    var persist = obj.persist || false;
                    var rand = Math.floor((Math.random() * 100) + 1);
                    init(rand, selector, success, persist);
                };
            };
        }(Flickerlessly);

        Flickerlessly.onReady(
            {
                selector: "#Adobe_Security_Warning",
                persist: false,
                success: function (el) {
                    if (product_arr_interstitial_adbe.length == 0 || '${profile.staffExclusion}' == 'true') {
                        try {
                            try {
                                ; (function (win, doc, style, timeout) { var STYLE_ID = 'at-interstitial-style'; function getParent() { return doc.getElementsByTagName('head')[0]; } function addStyle(parent, id, def) { if (!parent) { return; } var style = doc.createElement('style'); style.id = id; style.innerHTML = def; parent.appendChild(style); } function removeStyle(parent, id) { if (!parent) { return; } var style = doc.getElementById(id); if (!style) { return; } parent.removeChild(style); } addStyle(getParent(), STYLE_ID, style); setTimeout(function () { removeStyle(getParent(), STYLE_ID); }, timeout); }(window, document, "#Adobe_Security_Warning {opacity: 0 !important}", 3000));
                            } catch (e) { }
                            okCTAClick();
                        } catch (err) {
                            console.log(err);
                            closeInterstitialPopup();
                        }
                    } else {
                        try {
                            skipProfileValue = interstitialOffer_content_adbe[product_arr_interstitial_adbe[0]].skipValue;

                            if (product_arr_interstitial_adbe[0] != "Default") {
                                console.log("if else condition")
                                if (document.querySelector("#Adobe_Security_Warning .view-security-warning.adbe-cls") == null) {
                                    document.querySelector("#Adobe_Security_Warning").insertAdjacentHTML("afterbegin", '<div class="rdc-view-wrapper rdc-view view-security-warning adbe-cls" style="display: block !important;"><div class="scroll-content"> <div class="offer-title-adbe" style="color:' + interstitialOffer_content_adbe[product_arr_interstitial_adbe[0]].offerTitleFontColor + ';">' + interstitialOffer_content_adbe[product_arr_interstitial_adbe[0]].offerTitle + '</div> <img src="' + interstitialOffer_content_adbe[product_arr_interstitial_adbe[0]].imageBanner + '"> </div> <div class="rdc-view___footer adbe-cls"> <a class="applyNowCTA-adbe rdc-button rdc-button---primary" href="javascript:void(0);">' + interstitialOffer_content_adbe[product_arr_interstitial_adbe[0]].primaryCTAtitle + '</a><a id="Adobe_Security_Warning_Button_ADBE" name="Adobe_Security_Warning_Button_ADBE" class="proceedCTA-adbe">SKIP</a></div></div>');
                                } else {
                                    console.log("else default");
                                    document.querySelector("#Adobe_Security_Warning .view-security-warning.adbe-cls").outerHTML = '<div class="rdc-view-wrapper rdc-view view-security-warning adbe-cls" style="display: block !important;"><div class="scroll-content"> <div class="offer-title-adbe" style="color:' + interstitialOffer_content_adbe[product_arr_interstitial_adbe[0]].offerTitleFontColor + ';">' + interstitialOffer_content_adbe[product_arr_interstitial_adbe[0]].offerTitle + '</div> <img src="' + interstitialOffer_content_adbe[product_arr_interstitial_adbe[0]].imageBanner + '"> </div> <div class="rdc-view___footer adbe-cls"> <a class="applyNowCTA-adbe rdc-button rdc-button---primary" href="javascript:void(0);">' + interstitialOffer_content_adbe[product_arr_interstitial_adbe[0]].primaryCTAtitle + '</a><a id="Adobe_Security_Warning_Button_ADBE" name="Adobe_Security_Warning_Button_ADBE" class="proceedCTA-adbe">SKIP</a></div></div>';
                                }


                                document.querySelector("#Adobe_Security_Warning").style = "display: block!important";

                                document.querySelector('#Adobe_Security_Warning a.applyNowCTA-adbe').addEventListener("click", function () {
                                    if (interstitialOffer_content_adbe[product_arr_interstitial_adbe[0]].primaryCTAType == 'deeplink') {
                                        window.top.deepLinkOpen(interstitialOffer_content_adbe[product_arr_interstitial_adbe[0]].primaryCTAlink);
                                    }

                                    if (interstitialOffer_content_adbe[product_arr_interstitial_adbe[0]].primaryCTAType == 'website') {
                                        window.top.open(interstitialOffer_content_adbe[product_arr_interstitial_adbe[0]].primaryCTAlink);
                                    }

                                    adobe.target.trackEvent({
                                        "mbox": "mboxClickTrack",
                                        "params": {
                                            "clicked": "IPCTAclicks-" + product_arr_interstitial_adbe[0]
                                        }
                                    });

                                    okCTAClick();
                                });
                            } else {
                                if (document.querySelector("#Adobe_Security_Warning .view-security-warning.adbe-cls") == null) {
                                    document.querySelector("#Adobe_Security_Warning").insertAdjacentHTML("afterbegin", '<div class="rdc-view-wrapper rdc-view view-security-warning adbe-cls" style="display: block !important;"><div class="scroll-content"> <img src="' + interstitialOffer_content_adbe[product_arr_interstitial_adbe[0]].imageBanner + '"> </div> <div class="rdc-view___footer adbe-cls"><a class="applyNowCTA-adbe rdc-button rdc-button---primary" href="javascript:void(0);">' + interstitialOffer_content_adbe[product_arr_interstitial_adbe[0]].primaryCTAtitle + '</a> <a id="Adobe_Security_Warning_Button_ADBE" name="Adobe_Security_Warning_Button_ADBE" class="proceedCTA-adbe">SKIP</a></div></div>');
                                }
                                else {
                                    document.querySelector("#Adobe_Security_Warning .view-security-warning.adbe-cls").outerHTML = '<div class="rdc-view-wrapper rdc-view view-security-warning adbe-cls" style="display: block !important;"><div class="scroll-content"> <img src="' + interstitialOffer_content_adbe[product_arr_interstitial_adbe[0]].imageBanner + '"> </div> <div class="rdc-view___footer adbe-cls"> <a class="applyNowCTA-adbe rdc-button rdc-button---primary" href="javascript:void(0);">' + interstitialOffer_content_adbe[product_arr_interstitial_adbe[0]].primaryCTAtitle + '</a><a id="Adobe_Security_Warning_Button_ADBE" name="Adobe_Security_Warning_Button_ADBE" class="proceedCTA-adbe">SKIP</a></div></div>';
                                }
                                document.querySelector("#Adobe_Security_Warning").style = "display: block!important";

                                document.querySelector('#Adobe_Security_Warning a.applyNowCTA-adbe').addEventListener("click", function () {
                                    if (interstitialOffer_content_adbe[product_arr_interstitial_adbe[0]].primaryCTAType == 'deeplink') {
                                        window.top.deepLinkOpen(interstitialOffer_content_adbe[product_arr_interstitial_adbe[0]].primaryCTAlink);
                                    }

                                    if (interstitialOffer_content_adbe[product_arr_interstitial_adbe[0]].primaryCTAType == 'website') {
                                        window.top.open(interstitialOffer_content_adbe[product_arr_interstitial_adbe[0]].primaryCTAlink);
                                    }

                                    adobe.target.trackEvent({
                                        "mbox": "mboxClickTrack",
                                        "params": {
                                            "clicked": "checkAvailability-CNY"
                                        }
                                    });

                                    console.log("line: 401 => here!!!!!!!!!!!!!!!!!!!!!");
                                    okCTAClick();
                                });
                            }

                            document.querySelector("#Adobe_Security_Warning").style = "visibility: visible!important";

                            document.querySelector("#Adobe_Security_Warning").insertAdjacentHTML("beforeend", '<style>body #Adobe_Security_Warning .view-security-warning {display: none !important;}</style>');
                            setTimeout(function () {
                                if (document.querySelector("#at-interstitial-style") != null) {
                                    document.querySelector("#at-interstitial-style").remove();
                                }
                            }, 100);

                            var skipTimerPassed = false;
                            if (product_arr_interstitial_adbe[0] != "Default") {
                                setTimeout(function () {
                                    setTimeout(function () {
                                        skipTimerPassed = true;
                                    }, 150);
                                }, skipTimerValue);
                            }

                            jQuery('#Adobe_Security_Warning_Button_ADBE').click(function () {
                                document.querySelector("#Adobe_Security_Warning_Button").click();

                                var skipProfile = "profile." + product_arr_interstitial_adbe[0] + 'Skip';
                                var params = { "clicked": "skipClicks-CNY" };

                                if ((skipTimerPassed == false) && (skipProfileValue == 0 || skipProfileValue == 1 || skipProfileValue == 2)) {
                                    skipProfileValue++;
                                    params[skipProfile] = skipProfileValue;
                                    adobe.target.trackEvent({
                                        "mbox": "mboxClickTrack",
                                        "params": params
                                    });
                                } else if ((skipTimerPassed == true) && (skipProfileValue == 0 || skipProfileValue == 1 || skipProfileValue == 2)) {
                                    params[skipProfile] = 0;
                                    adobe.target.trackEvent({
                                        "mbox": "mboxClickTrack",
                                        "params": params
                                    });
                                }

                                if (skipProfileValue >= 3) {
                                    var current_date = new Date();

                                    // Values in milliseconds
                                    var current_dateInMs = current_date.valueOf();
                                    var ThirtyDays_InMs = 1000 * 60 * 60 * 24 * 30;

                                    var calculated_date = new Date(current_dateInMs + ThirtyDays_InMs);

                                    console.log(current_date);
                                    console.log(calculated_date);

                                    params[skipProfile] = calculated_date.toString();
                                    adobe.target.trackEvent({
                                        "mbox": "mboxClickTrack",
                                        "params": params
                                    });
                                }
                            });

                        } catch (e) {
                            okCTAClick();
                        }
                    }
                }
            }
        );
    } catch (e) {
        // console.log(e);
        okCTAClick();
    }
</script>